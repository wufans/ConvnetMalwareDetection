import os
import time
import pickle
import argparse
import pandas as pd
#处理数据并划分测试集合验证集
def train_test_split(data, label, val_size=0.1):
    idx = np.arange(len(data))
    np.random.shuffle(idx)
    split = int(len(data)*val_size)
    x_train, x_test = data[idx[split:]], data[idx[:split]]
    y_train, y_test = label[idx[split:]], label[idx[:split]]
    return x_train, x_test, y_train, y_test

def data_generator(data, labels, max_len=200000, batch_size=64, shuffle=True):
    idx = np.arange(len(data))
    if shuffle:
        np.random.shuffle(idx)
    batches = [idx[range(batch_size*i, min(len(data), batch_size*(i+1)))] for i in range(len(data)//batch_size+1)]
    while True:
        for i in batches:
            xx = preprocess(data[i], max_len)[0]
            yy = labels[i]
            yield (xx, yy)
def spyder_data():
    "malshare.com"
    return None


def del_exe():
    target = r"E:\dataset\exe文件\benign"
    files = os.listdir(target)
    for file in files:
        print(file)
        if ".exe" in file:
            if not file.rstrip(".exe") in files:
                os.rename(os.path.join(target,file),os.path.join(target,file.replace(".exe","")))
if __name__ == '__main__':
    #path = "data"
    del_exe()
